<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %> 
<body>
    <%- include('partials/header') %> 
<div class="container mt-5">
    <form action="/movies/edit/<%= pelicula.id %>?_method=PUT " method="POST">
        <h1 class="alert-success">Editar Pelicula</h1>
        <div class="row">
            <div class="col-8">
                <div class="form-row">
                    <div class="col-6">
                        <div class="form-group">
                          <label  for="">Titulo:</label>
                          <input type="text" class="form-control" placeholder="Title" name="title" value="<%=(typeof old != 'undefined' && old.title)?old.title:pelicula.title  %>">
                          <span class="text-danger"><%= (typeof errors != 'undefined' && errors.title)?errors.title.msg:"" %> </span>
                        </div>
                    </div>
                    <div class="col-3">
                      <div class="form-group">
                        <label  for="">Duración:</label>
                        <input type="number" class="form-control" placeholder="Duración" name="length" value="<%=(typeof old != 'undefined' && old.length)?old.title:pelicula.length  %>">
                        <span class="text-danger"><%= (typeof errors != 'undefined' && errors.length)?errors.length.msg:"" %> </span>
                      </div>
                  </div>
                    <div class="col-3">
                        <div class="form-group">
                          <label  for="">Rating:</label>
                          <input type="number" class="form-control" placeholder="rating" step="0.1" name="rating" value="<%=(typeof old != 'undefined' && old.rating)?old.rating:pelicula.rating  %>">
                          <span class="text-danger"><%= (typeof errors != 'undefined' && errors.rating)?errors.rating.msg:"" %> </span>
                        </div>
                    </div>
                  </div>
                  <div class="form-row">
                      <div class="col-4">
                          <label for="">Premios</label>
                          <div class="form-group">
                              <input type="number" class="form-control" placeholder="Awards" name="awards" value="<%=(typeof old != 'undefined' && old.awards)?old.awards:pelicula.awards  %>">
                              <span class="text-danger"><%= (typeof errors != 'undefined' && errors.awards)?errors.awards.msg:"" %> </span>
                          </div>
                      </div>
                      <div class="col-4">
                          <div class="form-group">
                              <label for="">Fecha de estreno</label>
                              <input type="date" class="form-control" title="Release Date" name="release_date" value="<%=(typeof old != 'undefined' && old.release_date)?old.release_date:estreno  %>">
                              <span class="text-danger"><%= (typeof errors != 'undefined' && errors.release_date)?errors.release_date.msg:"" %> </span>
                          </div>
                      </div>
                      <div class="col-4">
                          <div class="form-group">
                              <label for="">Género</label>
                              <select class="form-control" name="genre" id="" name="genre">
                                  <% if (pelicula.genero) { %>
                                      <option value="<%= pelicula.genre_id %>"><%= pelicula.genero.name %> </option>
                                  <% }else{ %>
                                      <option value="">Elija el género...</option>
                                  <% } %>
          
                                  <% generos.forEach(genero => { %>
                                      <option value="<%= genero.id %>"><%= genero.name %> </option>
                                  <% }) %>
                              </select>
                              <span class="text-danger"><%= (typeof errors != 'undefined' && errors.genre)?errors.genre.msg:"" %> </span>
                          </div>
                      </div>
                  </div>
            </div>
            <div class="col-4">
                <div class="form-group">
                    <label for="">Actores</label>
                    <select class="form-control" name="actors" id="" multiple size="5">
                        <% actores.forEach(actor => { %>
                            <option value="<%= actor.id %>"><%= actor.first_name + " " + actor.last_name %> </option>
                        <% }) %>
                        <option value=""></option>
                    </select>
                </div>
            </div>
        </div>
      
        <div class="form-group text-center">
            <button class="btn btn-success">Actualizar</button>
        </div>

      </form>
</div>
   





    <%- include('partials/footer') %> 

</body>
</html>